# GitHub

## はじめに

本サイトにつきまして，以下をご認識のほど宜しくお願いいたします．

https://hiroki-it.github.io/tech-notebook-gitbook/

<br>

## テンプレート

### テンプレートの配置

リポジトリの直下に```.github```ディレクトリを配置し，```ISSUE_TEMPLATE.md```や```PULL_REQUEST_TEMPLATE.md```の名前でファイルを置く．Issueのテンプレートに関して，代わりに```ISSUE_TEMPLATE```ディレクトリを置き，任意の名前のmdファイルを置くと，複数のテンプレートを作成できる．

参考：https://qiita.com/nyamogera/items/3fe6985b45fbd5377184

```shell
project/
└── .github
    ├── ISSUE_TEMPLATE.md
    └── PULL_REQUEST_TEMPLATE.md
```

```shell
project/
└── .github
    ├── ISSUE_TEMPLATE
    |   ├── FIX.md
    |   └── UPDATE.md
    |
    └── PULL_REQUEST_TEMPLATE.md
```

<br>

### Issue

#### ・Issueの分割

一つのIssueとブランチにたくさんの実装をCommitすることは望ましくない．そこで，大きな対応を個々の対応に分割する．そして，大きな対応に関する基点Issueと基点ブランチを作成し，個々の対応に関連する子Issueと子ブランチを作成していく．個別の対応が終わったら，親ブランチへマージしていく．

#### ・タイトル

タイトルは『〇〇する．』とする．句読点の有無は好み．

#### ・内容

内容は『背景』と『対応方針』さえ伝われば，文言自体はそのリポジトリのルールに合わせる．

**＊具体例＊**

```md
# 背景
<!-- Issue作成の理由になった要望やバグを記載する -->
<!-- 関連するIssueやPullReqがあればリンクを共有する -->


# 対応方針
<!-- どのような方法で対応する予定なのかを箇条書きで記載する -->
<!-- 方法に関するドキュメントや技術記事があればリンクを共有する -->
```

<br>

### PullReq

#### ・タイトル

タイトルは『〇〇した．』とする．句読点の有無は好み．

#### ・WIP

実装途中のPullReqであり，実装方法などを質問したい場合に，タイトルに『WIP』とつけておく．レビューしてもらいたくなったら，これをはずす．レビュー修正時に，実装に時間がかかりそうであったら，再び付けても良い．

#### ・内容

内容は『対応内容』と『レビューしてほしいところ』さえ伝われば，文言自体はそのリポジトリのルールに合わせる．もし，レビュー期限や動作確認手順を知らせる必要があれば『レビュー期限』『確認手順』の項目を設ける．

**＊具体例＊**

```md
# リリース予定日
<!-- リリース予定日を記載する -->


# 対応内容
<!-- どのように対応したのか箇条書きで記載する -->
<!-- 関連するIssueやPullReqがあればリンクを共有する -->


# レビューしていただきたいところ
<!-- 対応内容の中で適切かどうかが不安なものを記載する -->
```

<br>

## レビューの方法

### レビュー観点

#### ・ビジネスルールや仕様通りか

実装の条件文や，コメントから，ビジネスルールや仕様を理解する．

1. 条件文で```var_dump()``` を行う．
2. どういった入力がされた場合に，```true``` として判断しているのかを確認．例えば，受注済区分値が設定されているときに，それが失注区分値に変わった場合に，値を返却しているならば，そこから，『失注』のビジネスルールが垣間見える．
3. 定数に添えられたコメントから，仕様を理解．

#### ・バリデーションは適切か

```empty()``` ，```isset()``` などを正しく区別して使えているかを確認する

#### ・冗長になっていないか

重複する処理を```foreach()```にまとめられないかを確認する．また，変数の格納が重複していないかを確認する．

<br>

## リリース

### hotfixブランチのリリース

1. Issueを作成する．
2. mainブランチから，『```hotfix/<issue番号>```』の名前でブランチを作成する．
3. プルリクを作成し，マージの向き先を```main```ブランチとする．
4. 速攻でapproveをもらい，mainブランチにマージする．この時，hotfixブランチは後でdevelopブランチにマージするため，削除しないようにする．
4. パッチ番号を一つ増やしたタグを付与し，再リリースする．
5. リリース後，エラーが解消されたら，ローカルPCでhotfixブランチをdevelopブランチにマージする．

